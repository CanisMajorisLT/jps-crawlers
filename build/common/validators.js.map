{"version":3,"sources":["../../src/crawlers/common/validators.js"],"names":[],"mappings":";;;;;QAWgB;QAmBA;QAIA;QAIA;;;;;;;;;;;;;;AA3BT,SAAS,aAAT,CAAuB,GAAvB,EAA4B,UAA5B,EAAwC;;AAC3C,QAAM,aAAa,IAAI,IAAJ,CADwB;;AAG3C,aAAS,8BAAT,GAA0C;AACtC,YAAM,UAAU,UAAU,CAAV,CAAV,CADgC;AAEtC,YAAM,SAAS,IAAI,KAAJ,CAAU,IAAV,EAAgB,SAAhB,CAAT,CAFgC;;AAItC,mBAAW,OAAX,CAAmB,UAAC,SAAD,EAAc;AAC7B,gBAAI,CAAC,UAAU,MAAV,CAAD,EAAoB;AACpB,sBAAM,6BAAgB,QAAQ,IAAR,EAAhB,EAAgC,UAAhC,EAA4C,UAAU,IAAV,CAAlD,CADoB;aAAxB;SADe,CAAnB,CAJsC;;AAUtC,eAAO,MAAP,CAVsC;KAA1C;;AAaA,WAAO,8BAAP,CAhB2C;CAAxC;;AAmBA,SAAS,cAAT,CAAwB,CAAxB,EAA2B;AAC9B,WAAO,MAAM,EAAN,CADuB;CAA3B;;AAIA,SAAS,QAAT,CAAkB,CAAlB,EAAqB;AACxB,WAAO,OAAO,CAAP,KAAa,QAAb,CADiB;CAArB;;AAIA,SAAS,eAAT,CAAyB,CAAzB,EAA4B;AAC/B,WAAO,qBAAQ,CAAR,KAAc,EAAE,MAAF,GAAW,CAAX,CADU;CAA5B","file":"validators.js","sourcesContent":["import { isArray } from 'lodash'\r\nimport { makeParserError } from './errors'\r\n\r\n/**\r\n * Wraps a html parser function and validates its return value against\r\n * supplied validators. On validation fail, throw custom parser error.\r\n *\r\n * @param {Function} fnc\r\n * @param {Array} validators\r\n * @returns {Function}\r\n */\r\nexport function validateParse(fnc, validators) { //TODO test\r\n    const parserName = fnc.name;\r\n\r\n    function errorWrapperForParserFunctions() {\r\n        const element = arguments[0];\r\n        const result = fnc.apply(this, arguments);\r\n\r\n        validators.forEach((validator)=> {\r\n            if (!validator(result)) {\r\n                throw makeParserError(element.html(), parserName, validator.name)\r\n            }\r\n        });\r\n\r\n        return result\r\n    }\r\n\r\n    return errorWrapperForParserFunctions\r\n}\r\n\r\nexport function notEmptyString(v) {\r\n    return v !== ''\r\n}\r\n\r\nexport function isNumber(v) {\r\n    return typeof v === 'number'\r\n}\r\n\r\nexport function isNotEmptyArray(v) {\r\n    return isArray(v) && v.length > 0\r\n}"]}