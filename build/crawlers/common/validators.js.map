{"version":3,"sources":["crawlers/common/validators.js"],"names":[],"mappings":";;;;;;QAWgB;QAoBA;QAIA;QAIA;QAMA;QAIA;;;;;;;;;;;;;;AAtCT,SAAS,aAAT,CAAuB,GAAvB,EAA4B,UAA5B,EAAwC;;AAC3C,QAAM,aAAa,IAAI,IAAJ,CADwB;;AAG3C,aAAS,8BAAT,GAA0C;AACtC,YAAM,UAAU,UAAU,CAAV,CAAV,CADgC;AAEtC,YAAM,SAAS,IAAI,KAAJ,CAAU,IAAV,EAAgB,SAAhB,CAAT,CAFgC;AAGtC,YAAM,eAAe,QAAQ,IAAR,GAAe,QAAQ,IAAR,EAAf,GAAgC,OAAhC,CAHiB;;AAKtC,mBAAW,OAAX,CAAmB,UAAC,SAAD,EAAc;AAC7B,gBAAI,CAAC,UAAU,MAAV,CAAD,EAAoB;AACpB,sBAAM,6BAAgB,aAAa,KAAb,CAAmB,CAAnB,EAAsB,GAAtB,CAAhB,EAA4C,UAA5C,EAAwD,UAAU,IAAV,CAA9D,CADoB;aAAxB;SADe,CAAnB,CALsC;;AAWtC,eAAO,MAAP,CAXsC;KAA1C;;AAcA,WAAO,8BAAP,CAjB2C;CAAxC;;AAoBA,SAAS,gBAAT,CAA0B,CAA1B,EAA6B;AAChC,WAAO,MAAM,EAAN,CADyB;CAA7B;;AAIA,SAAS,QAAT,CAAkB,CAAlB,EAAqB;AACxB,WAAO,sBAAU,CAAV,CAAP,CADwB;CAArB;;AAIA,SAAS,eAAT,CAAyB,CAAzB,EAA4B;AAC/B,WAAO,qBAAQ,CAAR,KAAc,EAAE,MAAF,GAAW,CAAX,CADU;CAA5B;;AAIA,IAAM,gDAAoB,qBAApB;;AAEN,SAAS,oBAAT,CAA8B,CAA9B,EAAiC;AACpC,WAAO,MAAM,iBAAN,CAD6B;CAAjC;;AAIA,SAAS,MAAT,CAAgB,CAAhB,EAAmB;AACtB,WAAO,oBAAQ,CAAR,CAAP,CADsB;CAAnB","file":"crawlers/common/validators.js","sourcesContent":["import { isArray, isFinite as isNumber_, isDate as isDate_ } from 'lodash'\r\nimport { makeParserError } from './errors'\r\n\r\n/**\r\n * Wraps a html parser function and validates its return value against\r\n * supplied validators. On validation fail, throw custom parser error.\r\n *\r\n * @param {Function} fnc\r\n * @param {Array} validators\r\n * @returns {Function}\r\n */\r\nexport function validateParse(fnc, validators) { //TODO test\r\n    const parserName = fnc.name;\r\n\r\n    function errorWrapperForParserFunctions() {\r\n        const element = arguments[0];\r\n        const result = fnc.apply(this, arguments);\r\n        const elementToLog = element.html ? element.html() : element;\r\n\r\n        validators.forEach((validator)=> {\r\n            if (!validator(result)) {\r\n                throw makeParserError(elementToLog.slice(0, 300), parserName, validator.name)\r\n            }\r\n        });\r\n\r\n        return result\r\n    }\r\n\r\n    return errorWrapperForParserFunctions\r\n}\r\n\r\nexport function isNotEmptyString(v) {\r\n    return v !== ''\r\n}\r\n\r\nexport function isNumber(v) {\r\n    return isNumber_(v)\r\n}\r\n\r\nexport function isNotEmptyArray(v) {\r\n    return isArray(v) && v.length > 0\r\n}\r\n\r\nexport const ELEMENT_NOT_FOUND = '@@ELEMENT_NOT_FOUND';\r\n\r\nexport function isNotElementNotFound(v) {\r\n    return v !== ELEMENT_NOT_FOUND\r\n}\r\n\r\nexport function isDate(v) {\r\n    return isDate_(v)\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}